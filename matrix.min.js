class Matrix{constructor(t,e){var l={letters:"田由甲申甴电甶男甸甹町画甼甽甾甿畀畁畂畃畄畅畆畇畈畉畊畋界畍畎畏畐畑",font_size:20,font_color:"#0F0",bg_color:"#000",interval:50,blend_alpha:.05};this.extend(l,e),this.init(t,l)}extend(t,e){for(var l in e)t.hasOwnProperty(l)&&(t[l]=e[l]);return t}hexToRGB(t,e){t=t.replace("#","");var l=parseInt(3==t.length?t.slice(0,1).repeat(2):t.slice(0,2),16),n=parseInt(3==t.length?t.slice(1,2).repeat(2):t.slice(2,4),16),o=parseInt(3==t.length?t.slice(2,3).repeat(2):t.slice(4,6),16);return e?"rgba("+l+", "+n+", "+o+", "+e+")":"rgb("+l+", "+n+", "+o+")"}init(t,e){var l=document.querySelectorAll(t);[].forEach.call(l,t=>{var l=this.createCanvas(t);t.style.position="relative",l.style.position="absolute",l.style.top=0,l.style.left=0,l.style.height=t.offsetHeight+"px",l.style.width=t.offsetWidth+"px",l.width=l.clientWidth,l.height=l.clientHeight;for(var n=l.getContext("2d"),o=e.letters.split(""),i=e.font_size,a=l.width/i,r=[],s=0;s<a;s++)r[s]=1;n.fillStyle=this.hexToRGB(e.bg_color),n.fillRect(0,0,l.width,l.height);var h=[];this.draw_objects=[],this.draw_objects.push({context:n,canvas:l,drops:r,letters:o,font_size:i,font_color:e.font_color,falling_lines:h,blend_alpha:e.blend_alpha,bg_color:e.bg_color})}),setInterval(this.draw.bind(this),e.interval)}createCanvas(t){var e=document.createElement("canvas");return t.appendChild(e),e}draw(){[].forEach.call(this.draw_objects,t=>{t.context.fillStyle=this.hexToRGB(t.bg_color,t.blend_alpha),t.context.fillRect(0,0,t.canvas.width,t.canvas.height),t.context.fillStyle=t.font_color,t.context.font=t.font_size+"px arial",t.falling_lines.push(Math.floor(Math.random()*t.drops.length)),t.falling_lines.push(Math.floor(Math.random()*t.drops.length));for(var e=0;e<t.falling_lines.length;e++){var l=t.falling_lines[e],n=t.letters[Math.floor(Math.random()*t.letters.length)];t.context.fillText(n,l*t.font_size,t.drops[l]*t.font_size),t.drops[l]*t.font_size>t.canvas.height&&(t.drops[l]=0,delete t.falling_lines[e]),t.drops[l]++}})}}
